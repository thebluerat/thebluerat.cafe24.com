<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>JQuery</title>
    <link rel="stylesheet" href="./style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {

        });
        var x = 9;
        var y = 6;
        var bx = 9;
        var by = 6;
        /* 
        0 : 갈 수 있는 곳
        1 : 벽
        2 : 초깃값으로 돌아갈 곳
        3 : 튕겨 나갈 곳
        */
        var map = [
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1],
            [1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1],
            [1, 0, 0, 1, 1, 0, 3, 3, 0, 1, 1],
            [1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1],
            [1, 1, 0, 3, 0, 0, 1, 1, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ];

        function inputCheck(input) {
            switch (input) {
                case 37:
                    x--;
                    break;
                case 38:
                    y--;
                    break;
                case 39:
                    x++;
                    break;
                case 40:
                    y++;
                    break;
                default:
                    console.log("방향키 이외의 값이 들어왔습니다.");
                    break;
            }
        }

        function moveResult() {
            if (map[y][x] === 2) {
                x = 9;
                y = 6;
                bx = 9;
                by = 6;
                console.log("처음부터 시작!")
            } else if (map[y][x] === 1) {
                x = bx;
                y = by;
            } else if (map[y][x] === 3) {
                setTimeout(function() {
                    x = bx;
                    y = by;
                    draw();
                }, 29.99)
            } else {
                bx = x;
                by = y;
            }
        }

        function draw() {
            document.getElementsByTagName("div")[0].style.transform =
                "translateX(calc(50px * " + x + ")) translateY(calc(50px * " + y + "))";
        }

        //key 눌렸을 때
        function onkeyDown() {
            console.log("onKeyDown");
            var keycode = event.keyCode;
            inputCheck(keycode);
            moveResult();
            draw();
        }
    </script>
</head>

    <body onkeydown="onkeyDown()">
        <section>
            <div></div>
        </section>
    </body>
</html>